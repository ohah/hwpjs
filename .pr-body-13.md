## Summary

이 브랜치는 **미구현 스펙 처리 구현 계획** 실행 결과를 담고 있으며, main 리베이스 후 `paragraphs_from_children_or_param` 통합 리팩터를 반영했습니다.

### 구현 항목 (계획 Task 1~5)

| Task | 내용 |
|------|------|
| 1 | **각주/미주 HTML**: 본문 참조 마크업 + 문서 말미 `footnotes`/`endnotes` 블록 |
| 2 | **머리말/꼬리말 HTML**: body 상단/하단에 header/footer 영역 출력 |
| 3 | **구역/단 정의 HTML**: section_def, column_def 자식 문단을 `extra_content`로 본문 흐름에 반영 |
| 4 | **글자 모양**: core `process_paragraph`에서 CharShape 수집·구간별 `render_text` 적용 (HTML/Markdown) |
| 5 | **개요 번호**: `viewer/core/outline.rs` 공통화, HTML `<span class="…outline-number">`, Markdown 개요 번호 출력 |

### 리팩터

- **paragraphs_from_children_or_param**: footnote, endnote, header, footer, section_def, column_def 6곳 중복 제거 → `ctrl_header/mod.rs`에 한 곳만 두고 공용화.

### Fixtures vs Snapshots 비교

- **기준:** `tests/fixtures/*.html`(골든) vs `tests/snapshots/*.html`(뷰어 결과물).
- **요약:** 동일 stem으로 비교 시 현재 **모든 쌍에서 내용 상이**(DIFF).  
  - 이유: fixture는 `<link>` + 외부 CSS, snapshot은 `<style>` 인라인(AGENTS.md 규칙), 클래스/수치 등 구현 차이.
- **상세:** [documents/plans/2026-02-21-fixtures-vs-snapshots-comparison.md](documents/plans/2026-02-21-fixtures-vs-snapshots-comparison.md)  
  Fixture 동기화는 별도 Phase로 진행 예정 ([fixtures-html-sync-plan](documents/plans/2026-02-21-fixtures-html-sync-plan.md)).

### Test

- `bun run test:rust` / `bun run test:rust:snapshot`: 리팩터 후 빌드 및 기존 스냅샷 테스트 통과.
- 일부 fixture(예: sample-5017-pics)에 대한 스냅샷 갱신은 main 리베이스 영향으로 `.snap.new` 생성될 수 있음 → `bun run test:rust:snapshot:review`로 검토·승인.

### Rebase

- `origin/main` 기준 리베이스 완료.  
- Force push로 원격 브랜치 갱신됨.
